"use strict";(self.webpackChunkaadmm_admin=self.webpackChunkaadmm_admin||[]).push([[640],{640:(k,h,r)=>{r.r(h),r.d(h,{PaymentsModule:()=>N});var g=r(9808),x=r(9966),m=r(2382),v=r(4466),_=r(7822),d=r(655),p=r(9127);class c{constructor(){this._paymentHistory=[],this.loaded=!1,this.currentPage=1,this.itemsPerPage=10,this.totalItems=0,this.paginationKeys=[],this.isLastPage=!1}setPaymentHistory(s){this.loaded=!0,this._paymentHistory=s.data.data,this.isLastPage=s.data.last_page,this.totalItems=s.data.data.length}get paymentHistory(){return this._paymentHistory.slice()}}(0,d.gn)([p.LO],c.prototype,"_paymentHistory",void 0),(0,d.gn)([p.LO],c.prototype,"loaded",void 0),(0,d.gn)([p.LO],c.prototype,"currentPage",void 0),(0,d.gn)([p.LO],c.prototype,"itemsPerPage",void 0),(0,d.gn)([p.LO],c.prototype,"totalItems",void 0),(0,d.gn)([p.aD],c.prototype,"setPaymentHistory",null),(0,d.gn)([p.Fl],c.prototype,"paymentHistory",null);const o=new c;var f=r(2756),t=r(1223),y=r(4004),P=r(520),Z=r(854),C=r(216);let T=(()=>{class n{constructor(e,a,i){this._http=e,this._utilityService=a,this._helperService=i}getItems(e=""){let a=`?per_page=${o.itemsPerPage}${this._helperService.getPaginationKey(o.paginationKeys,o.currentPage)}`;return e&&(a+=`&${e}`),o.searchText&&(a+=`&q=${o.searchText}`),this._http.get("wallet-history/list"+(a||"")).pipe((0,y.U)(i=>(o.setPaymentHistory(i),i)))}getItem(e){return this._http.get("wallet-history/get/"+e).pipe((0,y.U)(a=>a))}exportWalletHistory(){this._http.get("wallet-history/export-wallet-history",{responseType:"blob"}).subscribe(e=>{this._utilityService.downloadFile(e,"Wallet History.pdf")})}downloadReceipt(e,a){this._http.get("wallet-history/get-reciept/"+e,{responseType:"blob"}).subscribe(i=>{this._utilityService.downloadFile(i,a+".pdf")})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(P.eN),t.LFG(Z.t),t.LFG(C.W))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var w=r(1954),M=r(605);function A(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",25)(1,"div",26)(2,"div",27)(3,"label",28),t._uU(4," Start Date:"),t.qZA(),t.TgZ(5,"div",29)(6,"input",30),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().start_date=i})("ngModelChange",function(){return t.CHM(e),t.oxw().endDateChanged()}),t.qZA()()(),t.TgZ(7,"div",27)(8,"label",28),t._uU(9," End Date:"),t.qZA(),t.TgZ(10,"div",29)(11,"input",30),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().end_date=i})("ngModelChange",function(){return t.CHM(e),t.oxw().endDateChanged()}),t.qZA()()(),t._UZ(12,"div",27),t.TgZ(13,"div",31)(14,"a",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearFilters()}),t._uU(15,"Clear Filters"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(6),t.Q6J("ngModel",e.start_date),t.xp6(5),t.Q6J("ngModel",e.end_date)}}function U(n,s){1&n&&(t.TgZ(0,"div",33)(1,"div",2)(2,"div",34)(3,"div",35)(4,"h5"),t._uU(5,"Overview"),t.qZA(),t._UZ(6,"div",36),t.qZA()()()())}function b(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr",39)(1,"td",45),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td",46)(7,"span",47),t._uU(8),t.qZA(),t._UZ(9,"br"),t._uU(10),t.qZA(),t.TgZ(11,"td",48)(12,"span",49),t._uU(13),t.qZA()(),t.TgZ(14,"td",50),t._uU(15),t.qZA(),t.TgZ(16,"td",51),t._uU(17),t.ALo(18,"number"),t.qZA(),t.TgZ(19,"td")(20,"div",52)(21,"a",53),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(3).downloadReceipt(l.id,l.payment_intent)}),t._UZ(22,"img",54),t.qZA()()()()}if(2&n){const e=s.$implicit,a=s.index,i=t.oxw(3);t.xp6(2),t.Oqu((i.PaymentsStore.currentPage-1)*i.PaymentsStore.itemsPerPage+(a+1)),t.xp6(2),t.Oqu(t.xi3(5,9,e.created_at,i.AppStore.dateTimePipe)),t.xp6(4),t.Oqu(e.payer_first_name),t.xp6(2),t.hij(" ",e.payer_email," "),t.xp6(2),t.uIk("title",e.payment_intent),t.xp6(1),t.hij(" ",e.payment_intent," "),t.xp6(2),t.hij(" ",e.transaction_id," "),t.xp6(2),t.AsE(" ",i.AppStore.currency,"",t.xi3(18,12,e.amount,"0.2-2")," ")}}function S(n,s){1&n&&t._UZ(0,"app-no-data")}const u=function(n){return{"pointer-events":n}};function J(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",55)(1,"ul",56)(2,"li",57)(3,"a",58),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).nextPrev(-1)}),t._UZ(4,"i",59),t._uU(5," Prev"),t.qZA()(),t.TgZ(6,"li",57)(7,"a",60),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).nextPrev(1)}),t._uU(8,"Next "),t._UZ(9,"i",61),t.qZA()()()()}if(2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("ngStyle",t.VKq(2,u,1==e.PaymentsStore.currentPage?"none":"")),t.xp6(4),t.Q6J("ngStyle",t.VKq(4,u,e.PaymentsStore.isLastPage?"none":""))}}function O(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"table",38)(2,"thead")(3,"tr",39)(4,"th",40),t._uU(5,"Sl. No"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Date"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Name & Email"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Wallet ID"),t.qZA(),t.TgZ(12,"th",41),t._uU(13,"Transaction ID"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Amount "),t.qZA(),t.TgZ(16,"th",42),t._uU(17,"Reciept"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,b,23,15,"tr",43),t.qZA()(),t.YNc(20,S,1,0,"app-no-data",37),t.YNc(21,J,10,6,"div",44),t.BQk()),2&n){const e=t.oxw(2);t.xp6(19),t.Q6J("ngForOf",e.PaymentsStore.paymentHistory),t.xp6(1),t.Q6J("ngIf",e.PaymentsStore.loaded&&0==e.PaymentsStore.totalItems),t.xp6(1),t.Q6J("ngIf",e.PaymentsStore.totalItems||e.PaymentsStore.currentPage>1)}}function q(n,s){1&n&&(t.ynx(0),t._UZ(1,"app-loader"),t.BQk())}function I(n,s){if(1&n&&(t.TgZ(0,"div",10),t.YNc(1,O,22,3,"ng-container",37),t.YNc(2,q,2,0,"ng-container",37),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.PaymentsStore.loaded),t.xp6(1),t.Q6J("ngIf",!e.PaymentsStore.loaded)}}const F=[{path:"",component:(()=>{class n{constructor(e,a){this._paymentsService=e,this._cdr=a,this.PaymentsStore=o,this.showFilter=!1,this.searchText="",this.fileType="All",this.showMap=!1,this.AppStore=f.d,this.downloadObject=null}ngOnInit(){this.pageChange(null)}pageChange(e,a){e&&(o.currentPage=e),this._paymentsService.getItems(a).subscribe(i=>{this._cdr.detectChanges()})}nextPrev(e){if(!(e<0&&1==o.currentPage)){if(o.currentPage=o.currentPage+e,1!=o.currentPage){let i=o.paginationKeys.findIndex(l=>l.page==o.currentPage);-1==i?o.paginationKeys.push({page:o.currentPage,key:o.paymentHistory.splice(-1)[0].id}):e>0&&(o.paginationKeys[i].key=o.paymentHistory.splice(-1)[0].id)}this.pageChange(null,this.start_date&&this.end_date?"from="+this.start_date+"&to="+this.end_date:"")}}showHideFilter(){this.showFilter=!this.showFilter}searchPayments(){this.searchText?(this.initializePaginationKeys(),o.searchText=this.searchText.trim(),this.pageChange(null)):(o.searchText&&(this.initializePaginationKeys(),o.searchText="",this.pageChange(null)),o.searchText="")}initializePaginationKeys(){o.currentPage=1,o.paginationKeys=[]}endDateChanged(){this.start_date&&this.end_date&&(this.initializePaginationKeys(),this.pageChange(1,"from="+this.start_date+"&to="+this.end_date))}clearFilters(){this.searchText="",this.start_date="",this.end_date="",this.initializePaginationKeys(),this.pageChange(1)}switchMap(){this.showMap=!this.showMap}downloadReport(){this._paymentsService.exportWalletHistory()}downloadReceipt(e,a){this._paymentsService.downloadReceipt(e,a)}ngOnDestroy(){o.loaded=!1,o.searchText="",o.currentPage=1,o.paginationKeys=[]}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-payments"]],decls:32,vars:4,consts:[[1,"clearfix"],[1,"right-content"],[1,"row"],[1,"col-md-6","mt-2"],[1,"col-md-6","text-end","mt-2"],[1,"togle-checkbox"],[1,"switch"],[1,"switch-label"],["type","checkbox","id","switch-id",1,"switch",3,"click"],["for","switch-id"],[1,"col-12"],[1,"contentA"],[1,"col-md-6","mt-2","d-flex","align-items-center"],[1,"search"],["type","text","placeholder","Search Name or Email or Wallet ID",1,"searchTerm",3,"ngModel","ngModelChange"],["type","submit",1,"searchButton"],["src","assets/images/search-icon.svg","alt","Search"],["id","filter-btn",1,"filter-btn","ms-3",3,"click"],["src","assets/images/filter-icon.svg","alt","filter"],[1,"col-md-6","text-end","mt-3"],["data-bs-toggle","modal",1,"download-btn",3,"click"],["src","assets/images/download-icon.svg","alt",""],["class","filter-hide-area mt-3",4,"ngIf"],["class","contentB",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"filter-hide-area","mt-3"],[1,"row","justify-content-between"],[1,"col-md-6","col-lg","mt-2"],["for",""],[1,"input-group"],["type","date","placeholder","DD-MM-YYYY","name","StartDate","data-toggle","datepicker",1,"form-control",2,"color","rgba(255, 255, 255, 0.6)","text-transform","uppercase",3,"ngModel","ngModelChange"],[1,"col-md-6","col-lg","mt-2","text-md-end"],[1,"clear-filter",3,"click"],[1,"contentB"],[1,"col-md-12","mt-4"],[1,"chart-box","mb-0"],["id","overview-chart",2,"height","230px"],[4,"ngIf"],[1,"table","custom-res-table","mt-3"],[1,"hover-options"],["width","60px",1,"text-lg-center"],["width","300px"],["width","50px"],["class","hover-options",4,"ngFor","ngForOf"],["class","text-end mt-3",4,"ngIf"],[1,"text-lg-center"],["data-label","Name & Email"],[1,"full-color"],["data-label","Transcriptions"],["data-bs-toggle","tooltip","data-bs-placement","top"],["data-label","Redactions"],["data-label","Amount"],[1,"hover-btn-warap"],["title","Download","data-bs-toggle","tooltip","data-bs-placement","top",3,"click"],["src","assets/images/download-icon.svg","alt","Download"],[1,"text-end","mt-3"],[1,"pagination"],[3,"ngStyle"],[1,"prev",3,"click"],[1,"fas","fa-chevron-left"],[1,"next",3,"click"],[1,"fas","fa-chevron-right"]],template:function(e,a){1&e&&(t._UZ(0,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),t._uU(5,"Payment History"),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5)(8,"span",6)(9,"label",7),t._uU(10,"View Graph"),t.qZA(),t.TgZ(11,"input",8),t.NdJ("click",function(){return a.switchMap()}),t.qZA(),t._UZ(12,"label",9),t.qZA()()(),t.TgZ(13,"div",10)(14,"div",5)(15,"div",11)(16,"div",2)(17,"div",12)(18,"div",13)(19,"input",14),t.NdJ("ngModelChange",function(l){return a.searchText=l})("ngModelChange",function(){return a.searchPayments()}),t.qZA(),t.TgZ(20,"button",15),t._UZ(21,"img",16),t.qZA()(),t.TgZ(22,"a",17),t.NdJ("click",function(){return a.showHideFilter()}),t._UZ(23,"img",18),t.qZA()(),t.TgZ(24,"div",19)(25,"a",20),t.NdJ("click",function(){return a.downloadReport()}),t._UZ(26,"img",21),t._uU(27," Download Payment Report"),t.qZA()(),t.TgZ(28,"div",10),t.YNc(29,A,16,2,"div",22),t.qZA()()(),t.YNc(30,U,7,0,"div",23),t.qZA()(),t.YNc(31,I,3,2,"div",24),t.qZA()()),2&e&&(t.xp6(19),t.Q6J("ngModel",a.searchText),t.xp6(10),t.Q6J("ngIf",a.showFilter),t.xp6(1),t.Q6J("ngIf",a.showMap),t.xp6(1),t.Q6J("ngIf",!a.showMap))},directives:[m.Fj,m.JJ,m.On,g.O5,g.sg,w.d,g.PC,M.R],pipes:[g.uU,g.JJ],styles:[".my-pagination[_ngcontent-%COMP%]     .ngx-pagination li:not(:first-child){width:48px;height:48px;line-height:48px;text-align:center;margin:2px;border-radius:12px;background:#191919}.my-pagination[_ngcontent-%COMP%]     .ngx-pagination li:not(:last-child){width:48px;height:48px;line-height:48px;text-align:center;margin:2px;border-radius:12px;background:#191919}.my-pagination[_ngcontent-%COMP%]     .ngx-pagination .current{color:#fff}.my-pagination[_ngcontent-%COMP%]     .ngx-pagination{color:#4e4747}.my-pagination[_ngcontent-%COMP%]     .ngx-pagination .pagination-next{width:auto!important;font-weight:400!important}.my-pagination[_ngcontent-%COMP%]     .ngx-pagination .pagination-next :disabled{opacity:.5}.my-pagination[_ngcontent-%COMP%]     .ngx-pagination .pagination-previous{width:auto!important;font-weight:400!important}.my-pagination[_ngcontent-%COMP%]     .ngx-pagination .pagination-previous :disabled{opacity:.5}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:normal;word-wrap:break-word}"]}),n})()}];let H=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[_.Bz.forChild(F)],_.Bz]}),n})(),N=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.ez,H,v.m,m.UX,m.u5,x.JX]]}),n})()}}]);